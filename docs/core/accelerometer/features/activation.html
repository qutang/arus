<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.7.1" />
<title>arus.core.accelerometer.features.activation API documentation</title>
<meta name="description" content="Computing features related to activation samples …" />
<link href='https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css' rel='stylesheet'>
<link href='https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/8.0.0/sanitize.min.css' rel='stylesheet'>
<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github-gist.min.css" rel="stylesheet">
<style>.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{font-weight:bold}#index h4 + ul{margin-bottom:.6em}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase;cursor:pointer}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}.admonition{padding:.1em .5em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:0.9em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>arus.core.accelerometer.features.activation</code></h1>
</header>
<section id="section-intro">
<p>Computing features related to activation samples.</p>
<p>Author: Qu Tang</p>
<p>Date: Jul 10, 2018</p>
<p>References:</p>
<ol>
<li>Mannini A, Rosenberger M, Haskell WL, Sabatini AM, Intille SS. Activity
Recognition in Youth Using Single Accelerometer Placed at Wrist or Ankle. Med
Sci Sports Exerc. 2017;49(4):801–12.
<a href="https://www.ncbi.nlm.nih.gov/pubmed/27820724">https://www.ncbi.nlm.nih.gov/pubmed/27820724</a></li>
</ol>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">&#34;&#34;&#34;
Computing features related to activation samples.

Author: Qu Tang

Date: Jul 10, 2018

References:

1. Mannini A, Rosenberger M, Haskell WL, Sabatini AM, Intille SS. Activity
 Recognition in Youth Using Single Accelerometer Placed at Wrist or Ankle. Med
 Sci Sports Exerc. 2017;49(4):801–12.
 https://www.ncbi.nlm.nih.gov/pubmed/27820724

&#34;&#34;&#34;

import numpy as np
from ...libs.num import format_arr


def _active_samples(X, threshold=0.2):
    active_samples = X &gt;= threshold
    return active_samples


def _stats_active_samples_1d(active_samples):
    active_edges = np.diff(active_samples, prepend=0, append=0)
    rising_edges = np.argwhere(active_edges &gt; 0)
    falling_edges = np.argwhere(active_edges &lt; 0)
    durations = []
    if len(rising_edges) == 0:
        durations = [0, 0]
    else:
        if rising_edges[0] &gt; falling_edges[0]:
            falling_edges = falling_edges[1:]
        if rising_edges[-1] &gt; falling_edges[-1]:
            rising_edges = rising_edges[0:-1]
        if len(rising_edges) == 0:
            durations = [0, 0]
    num_activation_crossings = len(rising_edges)
    for r, f in zip(rising_edges, falling_edges):
        durations.append(f - r)
    mean_activation_duration = np.mean(durations)
    if len(durations) &lt;= 1:
        std_activation_duration = 0
    else:
        std_activation_duration = np.std(durations, ddof=1)
    return np.array([num_activation_crossings, mean_activation_duration, std_activation_duration])


def _stats_active_samples(active_samples):
    result = np.apply_along_axis(
        _stats_active_samples_1d, axis=0, arr=active_samples)
    return result


def stats_active_samples(X, threshold=0.2):
    X = format_arr(X)
    W = X.shape[0]

    active_samples = _active_samples(X, threshold=threshold)
    num_active_samples = np.sum(active_samples, axis=0, keepdims=True)
    stats = _stats_active_samples(active_samples)
    &#34;&#34;&#34;
    This feature identifies the amount of activity within the window that is over the threshold, thereby providing a rough estimate of the amount of relevant activity being recorded in the window. This feature could distinguish between activities that result in relevant acceleration in most of the window and activities in which the relevant activity takes place for only a portion of the window.
    &#34;&#34;&#34;
    stats_num_active_samples = num_active_samples / W

    &#34;&#34;&#34;
    &#34;This feature identifies the number of threshold crossings within the window (rising edges only), normalized to the number of active samples FS, thereby capturing movement fragmentation within the window. This feature could discriminate impulsive events from longer-lasting acceleration events, since it quantifies how many times within the window the acceleration passed from the inactive to the active condition.&#34;
    &#34;&#34;&#34;
    num_activations = np.atleast_2d(stats[0, :])
    stats_num_activations = np.divide(
        num_activations, num_active_samples, where=num_activations != 0.0)
    &#34;&#34;&#34;
    This captures the mean duration of activation intervals within the window, normalized by the window length. An activation interval is defined as the amount of samples between two consecutive threshold crossings. This feature provides information on movement bout fragmentation within the window that could help discriminate between activities that involve stable movements, such as those in natural walking, and those with short bouts, such as sport ones.
    &#34;&#34;&#34;
    mean_activation_durations = np.atleast_2d(stats[1, :])
    stats_mean_activation_durations = mean_activation_durations / W

    &#34;&#34;&#34;
    This feature captures the standard deviation of the duration of activation intervals within the window, normalized by the window length, thereby providing information on uniformity of activation intervals within the window. This feature may help discriminate between activities with cyclic movements with a very stable ratio between active and inactive phases, and more random activities. A stable cyclic movement would result in lower variability of activation intervals that would repeat themselves within the window. Fast and aperiodic movements, however, such as those in recreational activities would result in highly variable activation bouts.
    &#34;&#34;&#34;
    std_activation_durations = np.atleast_2d(stats[2, :])
    stats_std_activation_durations = std_activation_durations / W

    result = np.atleast_2d(np.concatenate((stats_num_active_samples,
                                           stats_num_activations,
                                           stats_mean_activation_durations, stats_std_activation_durations), axis=1))
    names = []
    for i in range(X.shape[1]):
        names = names + [&#34;ACTIVE_SAMPLES_&#34; + str(i), &#34;ACTIVATIONS_&#34; + str(
            i), &#34;MEAN_ACTIVATION_DURATIONS_&#34; + str(i), &#34;STD_ACTIVATION_DURATIONS_&#34; + str(i)]
    return result, names</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="arus.core.accelerometer.features.activation.stats_active_samples"><code class="name flex">
<span>def <span class="ident">stats_active_samples</span></span>(<span>X, threshold=0.2)</span>
</code></dt>
<dd>
<section class="desc"></section>
<details class="source">
<summary>Source code</summary>
<pre><code class="python">def stats_active_samples(X, threshold=0.2):
    X = format_arr(X)
    W = X.shape[0]

    active_samples = _active_samples(X, threshold=threshold)
    num_active_samples = np.sum(active_samples, axis=0, keepdims=True)
    stats = _stats_active_samples(active_samples)
    &#34;&#34;&#34;
    This feature identifies the amount of activity within the window that is over the threshold, thereby providing a rough estimate of the amount of relevant activity being recorded in the window. This feature could distinguish between activities that result in relevant acceleration in most of the window and activities in which the relevant activity takes place for only a portion of the window.
    &#34;&#34;&#34;
    stats_num_active_samples = num_active_samples / W

    &#34;&#34;&#34;
    &#34;This feature identifies the number of threshold crossings within the window (rising edges only), normalized to the number of active samples FS, thereby capturing movement fragmentation within the window. This feature could discriminate impulsive events from longer-lasting acceleration events, since it quantifies how many times within the window the acceleration passed from the inactive to the active condition.&#34;
    &#34;&#34;&#34;
    num_activations = np.atleast_2d(stats[0, :])
    stats_num_activations = np.divide(
        num_activations, num_active_samples, where=num_activations != 0.0)
    &#34;&#34;&#34;
    This captures the mean duration of activation intervals within the window, normalized by the window length. An activation interval is defined as the amount of samples between two consecutive threshold crossings. This feature provides information on movement bout fragmentation within the window that could help discriminate between activities that involve stable movements, such as those in natural walking, and those with short bouts, such as sport ones.
    &#34;&#34;&#34;
    mean_activation_durations = np.atleast_2d(stats[1, :])
    stats_mean_activation_durations = mean_activation_durations / W

    &#34;&#34;&#34;
    This feature captures the standard deviation of the duration of activation intervals within the window, normalized by the window length, thereby providing information on uniformity of activation intervals within the window. This feature may help discriminate between activities with cyclic movements with a very stable ratio between active and inactive phases, and more random activities. A stable cyclic movement would result in lower variability of activation intervals that would repeat themselves within the window. Fast and aperiodic movements, however, such as those in recreational activities would result in highly variable activation bouts.
    &#34;&#34;&#34;
    std_activation_durations = np.atleast_2d(stats[2, :])
    stats_std_activation_durations = std_activation_durations / W

    result = np.atleast_2d(np.concatenate((stats_num_active_samples,
                                           stats_num_activations,
                                           stats_mean_activation_durations, stats_std_activation_durations), axis=1))
    names = []
    for i in range(X.shape[1]):
        names = names + [&#34;ACTIVE_SAMPLES_&#34; + str(i), &#34;ACTIVATIONS_&#34; + str(
            i), &#34;MEAN_ACTIVATION_DURATIONS_&#34; + str(i), &#34;STD_ACTIVATION_DURATIONS_&#34; + str(i)]
    return result, names</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="arus.core.accelerometer.features" href="index.html">arus.core.accelerometer.features</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="arus.core.accelerometer.features.activation.stats_active_samples" href="#arus.core.accelerometer.features.activation.stats_active_samples">stats_active_samples</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<a href='https://qutang.github.io'>Qu Tang © 2019</a>
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.7.1</a>.</p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad()</script>
</body>
</html>