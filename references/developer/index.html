<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="ARUS package provides a computational framework to manage and process ubiquitous sensory data for human activity recognition." name=description><link href=https://qutang.github.io/arus/references/developer/ rel=canonical><meta content="Qu Tang" name=author><link href=../../assets/images/favicon.png rel="shortcut icon"><meta content="mkdocs-1.1.2, mkdocs-material-5.3.0" name=generator><title>Developer - ARUS Python package</title><link href=../../assets/stylesheets/main.6e35a1a6.min.css rel=stylesheet><link href=../../assets/stylesheets/palette.a46bcfb3.min.css rel=stylesheet><meta content name=theme-color><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback" rel=stylesheet><style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link href=../../assets/css/extra.css rel=stylesheet></head> <body data-md-color-accent=orange data-md-color-primary=white data-md-color-scheme=default dir=ltr> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#arus.developer> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav aria-label=Header class="md-header-nav md-grid"> <a aria-label="ARUS Python package" class="md-header-nav__button md-logo" href=https://qutang.github.io/arus/ title="ARUS Python package"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M16.5 5.5a2 2 0 002-2 2 2 0 00-2-2 2 2 0 00-2 2 2 2 0 002 2m-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3A7.298 7.298 0 0022 13v-2c-1.76.03-3.4-.89-4.3-2.4l-1-1.6c-.36-.6-1-1-1.7-1-.3 0-.5.1-.8.1L9 8.3V13h2V9.6l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4M4 9a1 1 0 01-1-1 1 1 0 011-1h3v2H4m1-4a1 1 0 01-1-1 1 1 0 011-1h5v2H5m-2 8a1 1 0 01-1-1 1 1 0 011-1h4v2H3z"></path></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> ARUS Python package </span> <span class="md-header-nav__topic md-ellipsis"> Developer </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query data-md-state=active name=query placeholder=Search spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </label> <button aria-label=Clear class="md-search__icon md-icon" data-md-component=search-reset tabindex=-1 type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a class=md-source href=https://github.com/qutang/arus/ title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 480 512" xmlns=http://www.w3.org/2000/svg><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg> </div> <div class=md-source__repository> qutang/arus </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav aria-label=Tabs class="md-tabs md-tabs--active" data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a class=md-tabs__link href=../..> Home </a> </li> <li class=md-tabs__item> <a href=../../tutorials/overview/ class=md-tabs__link> Use the package </a> </li> <li class=md-tabs__item> <a href=../stream/ class=md-tabs__link> API reference </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="ARUS Python package" class="md-nav__button md-logo" href=https://qutang.github.io/arus/ title="ARUS Python package"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M16.5 5.5a2 2 0 002-2 2 2 0 00-2-2 2 2 0 00-2 2 2 2 0 002 2m-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3A7.298 7.298 0 0022 13v-2c-1.76.03-3.4-.89-4.3-2.4l-1-1.6c-.36-.6-1-1-1.7-1-.3 0-.5.1-.8.1L9 8.3V13h2V9.6l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4M4 9a1 1 0 01-1-1 1 1 0 011-1h3v2H4m1-4a1 1 0 01-1-1 1 1 0 011-1h5v2H5m-2 8a1 1 0 01-1-1 1 1 0 011-1h4v2H3z"></path></svg> </a> ARUS Python package </label> <div class=md-nav__source> <a class=md-source href=https://github.com/qutang/arus/ title="Go to repository"> <div class="md-source__icon md-icon"> <svg viewbox="0 0 480 512" xmlns=http://www.w3.org/2000/svg><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg> </div> <div class=md-source__repository> qutang/arus </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1 id=nav-1 type=checkbox> <label class=md-nav__link for=nav-1> Home <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg> </span> </label> <nav aria-label=Home class=md-nav data-md-level=1> <label class=md-nav__title for=nav-1> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../.. title=Overview> Overview </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../LICENSE/ title=License> License </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../CODE_OF_CONDUCT/ title="Code Of Conduct"> Code Of Conduct </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../changelogs/ title=Changelogs> Changelogs </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 id=nav-2 type=checkbox> <label class=md-nav__link for=nav-2> Use the package <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg> </span> </label> <nav aria-label="Use the package" class=md-nav data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> Use the package </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../../tutorials/overview/ title=Overview> Overview </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../../tutorials/commandline/ title="Command line tool"> Command line tool </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" data-md-toggle=nav-3 id=nav-3 type=checkbox> <label class=md-nav__link for=nav-3> API reference <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg> </span> </label> <nav aria-label="API reference" class=md-nav data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> API reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-1 id=nav-3-1 type=checkbox> <label class=md-nav__link for=nav-3-1> Data Flow <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg> </span> </label> <nav aria-label="Data Flow" class=md-nav data-md-level=2> <label class=md-nav__title for=nav-3-1> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> Data Flow </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../stream/ title=Stream> Stream </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../generator/ title=Generator> Generator </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../segmentor/ title=Segmentor> Segmentor </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../scheduler/ title=Scheduler> Scheduler </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2 id=nav-3-2 type=checkbox> <label class=md-nav__link for=nav-3-2> Data Processing <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg> </span> </label> <nav aria-label="Data Processing" class=md-nav data-md-level=2> <label class=md-nav__title for=nav-3-2> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> Data Processing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../accelerometer/ title=Accelerometer> Accelerometer </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-3 id=nav-3-3 type=checkbox> <label class=md-nav__link for=nav-3-3> Plugins <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg> </span> </label> <nav aria-label=Plugins class=md-nav data-md-level=2> <label class=md-nav__title for=nav-3-3> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> Plugins </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../metawear/ title=Metawear> Metawear </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../actigraph/ title=Actigraph> Actigraph </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-4 id=nav-3-4 type=checkbox> <label class=md-nav__link for=nav-3-4> Extensions <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg> </span> </label> <nav aria-label=Extensions class=md-nav data-md-level=2> <label class=md-nav__title for=nav-3-4> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> Extensions </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=../filesys/ title=Filesys> Filesys </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../numpy/ title=Numpy> Numpy </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../pandas/ title=Pandas> Pandas </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../plotting/ title=Plotting> Plotting </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=../mhealth_format/ title="Mhealth format"> Mhealth format </a> </li> <li class=md-nav__item> <a class=md-nav__link href=../dataset/ title=Dataset> Dataset </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc> Developer <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"></path></svg> </span> </label> <a class="md-nav__link md-nav__link--active" href=./ title=Developer> Developer </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer> arus.developer </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.build_arus_app> build_arus_app() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.build_website> build_website() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.bump_package_version> bump_package_version() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.command_is_available> command_is_available() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.commit_repo> commit_repo() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.compress_dataset> compress_dataset() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.dev_website> dev_website() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.generate_changelogs> generate_changelogs() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.get_git_tags> get_git_tags() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.logging_dict> logging_dict() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.logging_st_and_et> logging_st_and_et() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.parse_changelogs> parse_changelogs() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.parse_conventional_commit> parse_conventional_commit() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.push_repo> push_repo() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.push_tag> push_tag() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.tag_repo> tag_repo() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.write_changelog_index_to_file> write_changelog_index_to_file() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.write_changelog_to_file> write_changelog_to_file() </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=../moment/ title=Moment> Moment </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer> arus.developer </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.build_arus_app> build_arus_app() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.build_website> build_website() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.bump_package_version> bump_package_version() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.command_is_available> command_is_available() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.commit_repo> commit_repo() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.compress_dataset> compress_dataset() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.dev_website> dev_website() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.generate_changelogs> generate_changelogs() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.get_git_tags> get_git_tags() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.logging_dict> logging_dict() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.logging_st_and_et> logging_st_and_et() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.parse_changelogs> parse_changelogs() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.parse_conventional_commit> parse_conventional_commit() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.push_repo> push_repo() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.push_tag> push_tag() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.tag_repo> tag_repo() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.write_changelog_index_to_file> write_changelog_index_to_file() </a> </li> <li class=md-nav__item> <a class=md-nav__link href=#arus.developer.write_changelog_to_file> write_changelog_to_file() </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a class="md-content__button md-icon" href=https://github.com/qutang/arus/blob/master/docs/references/developer.md title="Edit this page"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg> </a> <h1>Developer</h1> <p><code>arus.dev</code></p> <div class="doc doc-object doc-module"> <h2 class=hidden-toc href=#arus.developer id=arus.developer style="visibility: hidden; width: 0; height: 0;"> <a class=headerlink href=#arus.developer title="Permanent link">¶</a></h2> <div class="doc doc-contents first"> <p>Utilities for developers.</p> <ol> <li>Zip and release datasets to github.</li> <li>Bump package versions.</li> <li>Build packages and apps.</li> <li>Control logger handlers.</li> </ol> <p>Author: Qu Tang Date: 01/30/2020 License: GNU v3</p> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.build_arus_app> <code class="highlight language-python"> build_arus_app<span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>app_name</span><span class=p>,</span> <span class=n>version</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.build_arus_app title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>build_arus_app</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>app_name</span><span class=p>,</span> <span class=n>version</span><span class=p>):</span>
    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s1>'Build </span><span class=si>{}</span><span class=s1>'</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>app_name</span><span class=p>))</span>
    <span class=n>shutil</span><span class=o>.</span><span class=n>rmtree</span><span class=p>(</span><span class=s1>'./apps/</span><span class=si>{}</span><span class=s1>/build'</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>app_name</span><span class=p>),</span> <span class=n>ignore_errors</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
    <span class=n>shutil</span><span class=o>.</span><span class=n>rmtree</span><span class=p>(</span><span class=s1>'./apps/</span><span class=si>{}</span><span class=s1>/dist'</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>app_name</span><span class=p>),</span> <span class=n>ignore_errors</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

    <span class=n>cwd</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=s1>'apps'</span><span class=p>,</span> <span class=n>app_name</span><span class=p>)</span>
    <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>"pyinstaller main.spec"</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>cwd</span><span class=o>=</span><span class=n>cwd</span><span class=p>)</span>

    <span class=n>app_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>(),</span> <span class=s1>'apps'</span><span class=p>,</span> <span class=n>app_name</span><span class=p>,</span> <span class=s1>'releases'</span><span class=p>,</span>
                            <span class=n>app_name</span> <span class=o>+</span> <span class=s1>'_'</span> <span class=o>+</span> <span class=n>version</span> <span class=o>+</span> <span class=s1>'.zip'</span><span class=p>)</span>

    <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>dirname</span><span class=p>(</span><span class=n>app_path</span><span class=p>),</span> <span class=n>exist_ok</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
    <span class=n>cwd</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>(),</span> <span class=s1>'apps'</span><span class=p>,</span> <span class=n>app_name</span><span class=p>,</span> <span class=s1>'dist'</span><span class=p>,</span> <span class=n>app_name</span><span class=p>)</span>

    <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>"zip -r "</span> <span class=o>+</span> <span class=n>app_path</span> <span class=o>+</span>
                   <span class=s2>" ./"</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>cwd</span><span class=o>=</span><span class=n>cwd</span><span class=p>)</span>
    <span class=n>shutil</span><span class=o>.</span><span class=n>rmtree</span><span class=p>(</span><span class=s1>'./apps/</span><span class=si>{}</span><span class=s1>/build'</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>app_name</span><span class=p>),</span> <span class=n>ignore_errors</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.build_website> <code class="highlight language-python"> build_website<span class=p>()</span> </code> <a class=headerlink href=#arus.developer.build_website title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>200
201
202
203</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>build_website</span><span class=p>():</span>
    <span class=n>_copy_files_for_website</span><span class=p>()</span>
    <span class=n>generate_changelogs</span><span class=p>()</span>
    <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>"mkdocs gh-deploy -v"</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.bump_package_version> <code class="highlight language-python"> bump_package_version<span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>nver</span><span class=p>,</span> <span class=n>dev</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.bump_package_version title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <p>Bump package version</p> <p><strong>Parameters:</strong></p> <table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code>root</code></td> <td><code>str</code></td> <td> <p>The root path of the package</p> </td> <td><em>required</em></td> </tr> <tr> <td><code>name</code></td> <td><code>str</code></td> <td> <p>The name of the package</p> </td> <td><em>required</em></td> </tr> <tr> <td><code>nver</code></td> <td><code>str</code></td> <td> <p>The new version of the package</p> </td> <td><em>required</em></td> </tr> <tr> <td><code>dev</code></td> <td><code>bool</code></td> <td> <p>Whether it is a development version. Defaults to False.</p> </td> <td><code>False</code></td> </tr> </tbody> </table> <p><strong>Returns:</strong></p> <table> <thead> <tr> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code>str or None</code></td> <td> <p>New version or None</p> </td> </tr> </tbody> </table> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span> 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>bump_package_version</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>nver</span><span class=p>,</span> <span class=n>dev</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
    <span class=sd>"""Bump package version</span>

<span class=sd>    Args:</span>
<span class=sd>        root (str): The root path of the package</span>
<span class=sd>        name (str): The name of the package</span>
<span class=sd>        nver (str): The new version of the package</span>
<span class=sd>        dev (bool, optional): Whether it is a development version. Defaults to False.</span>

<span class=sd>    Returns:</span>
<span class=sd>        str or None: New version or None</span>
<span class=sd>    """</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>deph</span> <span class=o>=</span> <span class=n>importlib</span><span class=o>.</span><span class=n>import_module</span><span class=p>(</span><span class=s1>'dephell_versioning'</span><span class=p>)</span>
    <span class=k>except</span> <span class=ne>ImportError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
        <span class=n>_print_extra_dep_warning</span><span class=p>(</span><span class=n>e</span><span class=p>)</span>
        <span class=k>raise</span> <span class=ne>ImportError</span><span class=p>(</span><span class=n>e</span><span class=p>)</span>
    <span class=n>cver</span> <span class=o>=</span> <span class=n>_find_current_version</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>name</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>nver</span> <span class=ow>in</span> <span class=p>[</span><span class=s1>'major'</span><span class=p>,</span> <span class=s1>'minor'</span><span class=p>,</span> <span class=s1>'patch'</span><span class=p>]:</span>
        <span class=n>nver</span> <span class=o>=</span> <span class=n>deph</span><span class=o>.</span><span class=n>bump_version</span><span class=p>(</span>
            <span class=n>version</span><span class=o>=</span><span class=n>cver</span><span class=p>,</span> <span class=n>rule</span><span class=o>=</span><span class=n>nver</span><span class=p>,</span> <span class=n>scheme</span><span class=o>=</span><span class=s1>'semver'</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>dev</span><span class=p>:</span>
        <span class=n>nver</span> <span class=o>=</span> <span class=n>nver</span> <span class=o>+</span> <span class=s1>'+9000'</span>
    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s1>'new version is '</span> <span class=o>+</span> <span class=n>nver</span><span class=p>)</span>
    <span class=n>confirm</span> <span class=o>=</span> <span class=nb>input</span><span class=p>(</span><span class=s2>"Confirm to continue [y/n]?"</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>confirm</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=o>==</span> <span class=s1>'y'</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>command_is_available</span><span class=p>(</span><span class=s1>'poetry'</span><span class=p>)</span> <span class=ow>and</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=s1>'pyproject.toml'</span><span class=p>)):</span>
            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s1>'Bump poetry package version'</span><span class=p>)</span>
            <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>"poetry version "</span> <span class=o>+</span> <span class=n>nver</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>cwd</span><span class=o>=</span><span class=n>root</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>root</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=s1>'__init__.py'</span><span class=p>)):</span>
            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s1>'Bump package version file'</span><span class=p>)</span>
            <span class=n>deph</span><span class=o>.</span><span class=n>bump_file</span><span class=p>(</span><span class=n>path</span><span class=o>=</span><span class=n>pathlib</span><span class=o>.</span><span class=n>Path</span><span class=p>(</span><span class=s1>'arus'</span><span class=p>,</span> <span class=s1>'__init__.py'</span><span class=p>),</span>
                           <span class=n>old</span><span class=o>=</span><span class=n>cver</span><span class=p>,</span> <span class=n>new</span><span class=o>=</span><span class=n>nver</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>nver</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.command_is_available> <code class="highlight language-python"> command_is_available<span class=p>(</span><span class=n>cmd</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.command_is_available title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>58
59
60
61
62
63</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>command_is_available</span><span class=p>(</span><span class=n>cmd</span><span class=p>):</span>
    <span class=n>status</span><span class=p>,</span> <span class=n>output</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>getstatusoutput</span><span class=p>(</span><span class=n>cmd</span> <span class=o>+</span> <span class=s2>" --version"</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>status</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>True</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>False</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.commit_repo> <code class="highlight language-python"> commit_repo<span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>repo_root</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.commit_repo title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>126
127
128
129
130
131
132</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>commit_repo</span><span class=p>(</span><span class=n>message</span><span class=p>,</span> <span class=n>repo_root</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
    <span class=k>assert</span> <span class=n>command_is_available</span><span class=p>(</span><span class=s1>'git'</span><span class=p>)</span>
    <span class=n>repo_root</span> <span class=o>=</span> <span class=n>repo_root</span> <span class=ow>or</span> <span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>()</span>
    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s1>'Commit with message: '</span> <span class=o>+</span> <span class=n>message</span><span class=p>)</span>
    <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s1>'git add .'</span><span class=p>,</span> <span class=n>cwd</span><span class=o>=</span><span class=n>repo_root</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
    <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s1>'git commit -m "</span><span class=si>{}</span><span class=s1>"'</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>message</span><span class=p>),</span>
                   <span class=n>cwd</span><span class=o>=</span><span class=n>repo_root</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.compress_dataset> <code class="highlight language-python"> compress_dataset<span class=p>(</span><span class=n>source_dir</span><span class=p>,</span> <span class=n>out_dir</span><span class=p>,</span> <span class=n>out_name</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.compress_dataset title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>compress_dataset</span><span class=p>(</span><span class=n>source_dir</span><span class=p>,</span> <span class=n>out_dir</span><span class=p>,</span> <span class=n>out_name</span><span class=p>):</span>
    <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>out_dir</span><span class=p>,</span> <span class=n>exist_ok</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>command_is_available</span><span class=p>(</span><span class=s1>'tar --version'</span><span class=p>):</span>
        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s1>'Use tar to compress dataset...'</span><span class=p>)</span>
        <span class=n>output_path</span> <span class=o>=</span> <span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>out_dir</span><span class=p>,</span> <span class=n>out_name</span><span class=p>)</span>
        <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
            <span class=sa>f</span><span class=s1>'tar --exclude=".git" --exclude="DerivedCrossParticipants" --exclude=".gitignore" -zcvf </span><span class=si>{</span><span class=n>output_path</span><span class=si>}</span><span class=s1> -C </span><span class=si>{</span><span class=n>source_dir</span><span class=si>}</span><span class=s1> *'</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s1>'Use Python tar module to compress dataset...'</span><span class=p>)</span>

        <span class=k>def</span> <span class=nf>exclude</span><span class=p>(</span><span class=n>tarinfo</span><span class=p>):</span>
            <span class=k>if</span> <span class=s1>'DerivedCrossParticipants'</span> <span class=ow>in</span> <span class=n>tarinfo</span><span class=o>.</span><span class=n>name</span> <span class=ow>or</span> <span class=s1>'.git'</span> <span class=ow>in</span> <span class=n>tarinfo</span><span class=o>.</span><span class=n>name</span> <span class=ow>or</span> <span class=s1>'.gitignore'</span> <span class=ow>in</span> <span class=n>tarinfo</span><span class=o>.</span><span class=n>name</span><span class=p>:</span>
                <span class=k>return</span> <span class=kc>None</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=k>return</span> <span class=n>tarinfo</span>
        <span class=k>with</span> <span class=n>tarfile</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>out_dir</span><span class=p>,</span> <span class=n>out_name</span><span class=p>),</span> <span class=s2>"w:gz"</span><span class=p>)</span> <span class=k>as</span> <span class=n>tar</span><span class=p>:</span>
            <span class=n>tar</span><span class=o>.</span><span class=n>add</span><span class=p>(</span><span class=n>source_dir</span><span class=p>,</span> <span class=n>arcname</span><span class=o>=</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>basename</span><span class=p>(</span>
                <span class=n>source_dir</span><span class=p>),</span> <span class=nb>filter</span><span class=o>=</span><span class=n>exclude</span><span class=p>)</span>

        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s1>'Compression is completed.'</span><span class=p>)</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.dev_website> <code class="highlight language-python"> dev_website<span class=p>()</span> </code> <a class=headerlink href=#arus.developer.dev_website title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>194
195
196
197</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>dev_website</span><span class=p>():</span>
    <span class=n>_copy_files_for_website</span><span class=p>()</span>
    <span class=n>generate_changelogs</span><span class=p>()</span>
    <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>"mkdocs serve -v"</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.generate_changelogs> <code class="highlight language-python"> generate_changelogs<span class=p>(</span><span class=n>by_version</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.generate_changelogs title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>221
222
223
224
225
226
227
228
229
230
231
232
233
234</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>generate_changelogs</span><span class=p>(</span><span class=n>by_version</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
    <span class=n>tags</span> <span class=o>=</span> <span class=n>get_git_tags</span><span class=p>()</span>
    <span class=n>stop_tag</span> <span class=o>=</span> <span class=s1>'HEAD'</span>
    <span class=k>if</span> <span class=n>by_version</span><span class=p>:</span>
        <span class=k>for</span> <span class=n>start_tag</span> <span class=ow>in</span> <span class=n>tags</span><span class=p>:</span>
            <span class=n>start_tag</span> <span class=o>=</span> <span class=sa>f</span><span class=s1>'v</span><span class=si>{</span><span class=n>start_tag</span><span class=si>}</span><span class=s1>'</span>
            <span class=n>changelogs</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>check_output</span><span class=p>(</span>
                <span class=s2>" "</span><span class=o>.</span><span class=n>join</span><span class=p>([</span><span class=s1>'git'</span><span class=p>,</span> <span class=s1>'log'</span><span class=p>,</span> <span class=sa>f</span><span class=s1>'</span><span class=si>{</span><span class=n>start_tag</span><span class=si>}</span><span class=s1>...</span><span class=si>{</span><span class=n>stop_tag</span><span class=si>}</span><span class=s1>'</span><span class=p>,</span> <span class=s1>'--pretty=format:</span><span class=si>%s</span><span class=s1>-%h'</span><span class=p>]),</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>'utf-8'</span><span class=p>,</span>
                <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>universal_newlines</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>'</span><span class=se>\n</span><span class=s1>'</span><span class=p>)</span>
            <span class=n>parsed</span> <span class=o>=</span> <span class=n>parse_changelogs</span><span class=p>(</span><span class=n>changelogs</span><span class=p>)</span>
            <span class=n>write_changelog_to_file</span><span class=p>(</span><span class=n>parsed</span><span class=p>,</span> <span class=n>start_tag</span><span class=p>,</span> <span class=n>stop_tag</span><span class=p>)</span>
            <span class=n>stop_tag</span> <span class=o>=</span> <span class=n>start_tag</span>
    <span class=n>write_changelog_index_to_file</span><span class=p>(</span><span class=n>tags</span><span class=p>)</span>
    <span class=k>return</span> <span class=kc>True</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.get_git_tags> <code class="highlight language-python"> get_git_tags<span class=p>()</span> </code> <a class=headerlink href=#arus.developer.get_git_tags title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>206
207
208
209
210
211
212
213
214
215
216
217
218</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>get_git_tags</span><span class=p>():</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=n>semver</span> <span class=o>=</span> <span class=n>importlib</span><span class=o>.</span><span class=n>import_module</span><span class=p>(</span><span class=s1>'semver'</span><span class=p>)</span>
    <span class=k>except</span> <span class=ne>ImportError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
        <span class=n>_print_extra_dep_warning</span><span class=p>(</span><span class=n>e</span><span class=p>)</span>
        <span class=k>raise</span> <span class=ne>ImportError</span><span class=p>(</span><span class=n>e</span><span class=p>)</span>
    <span class=n>tags</span> <span class=o>=</span> <span class=n>subprocess</span><span class=o>.</span><span class=n>check_output</span><span class=p>(</span>
        <span class=s2>" "</span><span class=o>.</span><span class=n>join</span><span class=p>([</span><span class=s1>'git'</span><span class=p>,</span> <span class=s1>'tag'</span><span class=p>]),</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>'utf-8'</span><span class=p>,</span> <span class=n>text</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>universal_newlines</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
    <span class=n>tags</span> <span class=o>=</span> <span class=n>tags</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>'</span><span class=se>\n</span><span class=s1>'</span><span class=p>)</span>
    <span class=n>tags</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>map</span><span class=p>(</span><span class=k>lambda</span> <span class=n>tag</span><span class=p>:</span> <span class=n>tag</span><span class=o>.</span><span class=n>strip</span><span class=p>(</span><span class=s1>'v'</span><span class=p>),</span> <span class=nb>filter</span><span class=p>(</span>
        <span class=k>lambda</span> <span class=n>tag</span><span class=p>:</span> <span class=n>tag</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s1>'v'</span><span class=p>),</span> <span class=n>tags</span><span class=p>)))</span>
    <span class=n>tags</span> <span class=o>=</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>tags</span><span class=p>,</span> <span class=n>key</span><span class=o>=</span><span class=n>semver</span><span class=o>.</span><span class=n>VersionInfo</span><span class=o>.</span><span class=n>parse</span><span class=p>,</span> <span class=n>reverse</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>tags</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.logging_dict> <code class="highlight language-python"> logging_dict<span class=p>(</span><span class=n>data</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.logging_dict title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>327
328
329</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>logging_dict</span><span class=p>(</span><span class=n>data</span><span class=p>):</span>
    <span class=n>info</span> <span class=o>=</span> <span class=n>pprint</span><span class=o>.</span><span class=n>pformat</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>width</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>info</span><span class=p>)</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.logging_st_and_et> <code class="highlight language-python"> logging_st_and_et<span class=p>(</span><span class=n>st</span><span class=p>,</span> <span class=n>et</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.logging_st_and_et title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>332
333
334
335</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>logging_st_and_et</span><span class=p>(</span><span class=n>st</span><span class=p>,</span> <span class=n>et</span><span class=p>):</span>
    <span class=n>st_str</span> <span class=o>=</span> <span class=n>st</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>'%Y-%m-</span><span class=si>%d</span><span class=s1> %H:%M:%S.</span><span class=si>%f</span><span class=s1>'</span><span class=p>)</span>
    <span class=n>et_str</span> <span class=o>=</span> <span class=n>et</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s1>'%Y-%m-</span><span class=si>%d</span><span class=s1> %H:%M:%S.</span><span class=si>%f</span><span class=s1>'</span><span class=p>)</span>
    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>"</span><span class=si>{}</span><span class=s2> - </span><span class=si>{}</span><span class=s2>"</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>st_str</span><span class=p>,</span> <span class=n>et_str</span><span class=p>))</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.parse_changelogs> <code class="highlight language-python"> parse_changelogs<span class=p>(</span><span class=n>changelogs</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.parse_changelogs title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>parse_changelogs</span><span class=p>(</span><span class=n>changelogs</span><span class=p>):</span>
    <span class=n>parsed</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=n>category_map</span> <span class=o>=</span> <span class=p>{</span>
        <span class=s1>'api'</span><span class=p>:</span> <span class=s2>"API changes"</span><span class=p>,</span>
        <span class=s1>'feat'</span><span class=p>:</span> <span class=s2>"Features"</span><span class=p>,</span>
        <span class=s1>'refactor'</span><span class=p>:</span> <span class=s2>"Refactors"</span><span class=p>,</span>
        <span class=s1>'fix'</span><span class=p>:</span> <span class=s2>"Bug fixes"</span><span class=p>,</span>
        <span class=s1>'test'</span><span class=p>:</span> <span class=s2>"Test cases"</span>
    <span class=p>}</span>
    <span class=k>for</span> <span class=n>changelog</span> <span class=ow>in</span> <span class=n>changelogs</span><span class=p>:</span>
        <span class=n>tokens</span> <span class=o>=</span> <span class=n>changelog</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>'-'</span><span class=p>)</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>tokens</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>2</span><span class=p>:</span>
            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=sa>f</span><span class=s1>'Commit </span><span class=si>{</span><span class=n>changelog</span><span class=si>}</span><span class=s1> is invalid, ignore it'</span><span class=p>)</span>
            <span class=k>continue</span>
        <span class=n>msg</span> <span class=o>=</span> <span class=n>tokens</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
        <span class=n>commit</span> <span class=o>=</span> <span class=n>tokens</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
        <span class=n>category</span><span class=p>,</span> <span class=n>scope</span><span class=p>,</span> <span class=n>title</span> <span class=o>=</span> <span class=n>parse_conventional_commit</span><span class=p>(</span><span class=n>msg</span><span class=p>)</span>
        <span class=n>category</span> <span class=o>=</span> <span class=n>category</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>category</span> <span class=o>==</span> <span class=s2>""</span> <span class=ow>or</span> <span class=n>category</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>category_map</span><span class=p>:</span>
            <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=sa>f</span><span class=s1>'Commit </span><span class=si>{</span><span class=n>commit</span><span class=si>}</span><span class=s1> is not a conventional commit, ignore it'</span><span class=p>)</span>
            <span class=k>continue</span>
        <span class=n>category</span> <span class=o>=</span> <span class=n>category_map</span><span class=p>[</span><span class=n>category</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>category</span> <span class=ow>in</span> <span class=n>parsed</span><span class=p>:</span>
            <span class=n>parsed</span><span class=p>[</span><span class=n>category</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span>
                <span class=p>{</span><span class=s1>'scope'</span><span class=p>:</span> <span class=n>scope</span><span class=p>,</span> <span class=s1>'title'</span><span class=p>:</span> <span class=n>title</span><span class=p>,</span> <span class=s1>'commit'</span><span class=p>:</span> <span class=n>commit</span><span class=p>})</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>parsed</span><span class=p>[</span><span class=n>category</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span>
                <span class=p>{</span><span class=s1>'scope'</span><span class=p>:</span> <span class=n>scope</span><span class=p>,</span> <span class=s1>'title'</span><span class=p>:</span> <span class=n>title</span><span class=p>,</span> <span class=s1>'commit'</span><span class=p>:</span> <span class=n>commit</span><span class=p>}]</span>
    <span class=k>return</span> <span class=n>parsed</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.parse_conventional_commit> <code class="highlight language-python"> parse_conventional_commit<span class=p>(</span><span class=n>msg</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.parse_conventional_commit title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>312
313
314
315
316
317
318
319
320
321
322
323
324</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>parse_conventional_commit</span><span class=p>(</span><span class=n>msg</span><span class=p>):</span>
    <span class=n>tokens</span> <span class=o>=</span> <span class=n>msg</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>':'</span><span class=p>)</span>
    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>tokens</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>return</span> <span class=s2>""</span><span class=p>,</span> <span class=s2>""</span><span class=p>,</span> <span class=s2>""</span>
    <span class=n>category_scope</span> <span class=o>=</span> <span class=n>tokens</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
    <span class=n>title</span> <span class=o>=</span> <span class=n>tokens</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>strip</span><span class=p>(</span><span class=s1>' '</span><span class=p>)</span>
    <span class=n>sub_tokens</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=sa>r</span><span class=s1>'(\w+)'</span><span class=p>,</span> <span class=n>category_scope</span><span class=p>)</span><span class=o>.</span><span class=n>groups</span><span class=p>()</span>
    <span class=n>category</span> <span class=o>=</span> <span class=n>sub_tokens</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span>
    <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>sub_tokens</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
        <span class=n>scope</span> <span class=o>=</span> <span class=n>sub_tokens</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>scope</span> <span class=o>=</span> <span class=s2>""</span>
    <span class=k>return</span> <span class=n>category</span><span class=p>,</span> <span class=n>scope</span><span class=p>,</span> <span class=n>title</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.push_repo> <code class="highlight language-python"> push_repo<span class=p>(</span><span class=n>branch</span><span class=o>=</span><span class=s1>'master'</span><span class=p>,</span> <span class=n>repo_root</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.push_repo title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>145
146
147
148
149</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>push_repo</span><span class=p>(</span><span class=n>branch</span><span class=o>=</span><span class=s1>'master'</span><span class=p>,</span> <span class=n>repo_root</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
    <span class=k>assert</span> <span class=n>command_is_available</span><span class=p>(</span><span class=s1>'git'</span><span class=p>)</span>
    <span class=n>repo_root</span> <span class=o>=</span> <span class=n>repo_root</span> <span class=ow>or</span> <span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>()</span>
    <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s1>'git push origin </span><span class=si>{}</span><span class=s1>'</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
        <span class=n>branch</span><span class=p>),</span> <span class=n>cwd</span><span class=o>=</span><span class=n>repo_root</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.push_tag> <code class="highlight language-python"> push_tag<span class=p>(</span><span class=n>version</span><span class=p>,</span> <span class=n>repo_root</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.push_tag title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>152
153
154
155
156</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>push_tag</span><span class=p>(</span><span class=n>version</span><span class=p>,</span> <span class=n>repo_root</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
    <span class=k>assert</span> <span class=n>command_is_available</span><span class=p>(</span><span class=s1>'git'</span><span class=p>)</span>
    <span class=n>repo_root</span> <span class=o>=</span> <span class=n>repo_root</span> <span class=ow>or</span> <span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>()</span>
    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s1>'Push tag v</span><span class=si>{}</span><span class=s1>'</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>version</span><span class=p>))</span>
    <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s1>'git push origin v'</span> <span class=o>+</span> <span class=n>version</span><span class=p>,</span> <span class=n>cwd</span><span class=o>=</span><span class=n>repo_root</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.tag_repo> <code class="highlight language-python"> tag_repo<span class=p>(</span><span class=n>version</span><span class=p>,</span> <span class=n>message</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>repo_root</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.tag_repo title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>135
136
137
138
139
140
141
142</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>tag_repo</span><span class=p>(</span><span class=n>version</span><span class=p>,</span> <span class=n>message</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>repo_root</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
    <span class=k>assert</span> <span class=n>command_is_available</span><span class=p>(</span><span class=s1>'git'</span><span class=p>)</span>
    <span class=n>repo_root</span> <span class=o>=</span> <span class=n>repo_root</span> <span class=ow>or</span> <span class=n>os</span><span class=o>.</span><span class=n>getcwd</span><span class=p>()</span>
    <span class=n>message</span> <span class=o>=</span> <span class=n>message</span> <span class=ow>or</span> <span class=s2>"Tag with version </span><span class=si>{}</span><span class=s2>"</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>version</span><span class=p>)</span>
    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span>
        <span class=s1>'Tag repo with version </span><span class=si>{}</span><span class=s1> and message: </span><span class=si>{}</span><span class=s1>'</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>version</span><span class=p>,</span> <span class=n>message</span><span class=p>))</span>
    <span class=n>subprocess</span><span class=o>.</span><span class=n>run</span><span class=p>(</span>
        <span class=sa>f</span><span class=s1>'git tag -a v</span><span class=si>{</span><span class=n>version</span><span class=si>}</span><span class=s1> -m "</span><span class=si>{</span><span class=n>message</span><span class=si>}</span><span class=s1>"'</span><span class=p>,</span> <span class=n>cwd</span><span class=o>=</span><span class=n>repo_root</span><span class=p>,</span> <span class=n>shell</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.write_changelog_index_to_file> <code class="highlight language-python"> write_changelog_index_to_file<span class=p>(</span><span class=n>tags</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.write_changelog_index_to_file title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>269
270
271
272
273
274
275
276</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>write_changelog_index_to_file</span><span class=p>(</span><span class=n>tags</span><span class=p>):</span>
    <span class=n>item_template</span> <span class=o>=</span> <span class=s2>"* [</span><span class=si>{tag}</span><span class=s2>](</span><span class=si>{tag}</span><span class=s2>/)</span><span class=se>\n</span><span class=s2>"</span>
    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=s1>'.'</span><span class=p>,</span> <span class=s1>'docs'</span><span class=p>,</span> <span class=s1>'changelogs'</span><span class=p>,</span> <span class=s1>'index.md'</span><span class=p>),</span> <span class=s1>'w'</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>'utf-8'</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
        <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=sa>f</span><span class=s1>'# Changelogs (Latest stable version: </span><span class=si>{</span><span class=n>tags</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=si>}</span><span class=s1>)</span><span class=se>\n\n</span><span class=s1>'</span><span class=p>)</span>
        <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>item_template</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>tag</span><span class=o>=</span><span class=s1>'dev'</span><span class=p>))</span>
        <span class=k>for</span> <span class=n>tag</span> <span class=ow>in</span> <span class=n>tags</span><span class=p>:</span>
            <span class=n>tag</span> <span class=o>=</span> <span class=sa>f</span><span class=s1>'v</span><span class=si>{</span><span class=n>tag</span><span class=si>}</span><span class=s1>'</span>
            <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>item_template</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>tag</span><span class=o>=</span><span class=n>tag</span><span class=p>))</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 class="doc doc-heading" id=arus.developer.write_changelog_to_file> <code class="highlight language-python"> write_changelog_to_file<span class=p>(</span><span class=n>parsed_changelogs</span><span class=p>,</span> <span class=n>start_tag</span><span class=p>,</span> <span class=n>stop_tag</span><span class=p>)</span> </code> <a class=headerlink href=#arus.developer.write_changelog_to_file title="Permanent link">¶</a></h2> <div class="doc doc-contents"> <details class=quote> <summary>Source code in <code>arus\developer.py</code></summary> <table class=highlighttable> <tr> <td class=linenos> <div class=linenodiv> <pre><span></span>279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309</pre> </div> </td> <td class=code> <div class=highlight> <pre><span></span><code><span class=k>def</span> <span class=nf>write_changelog_to_file</span><span class=p>(</span><span class=n>parsed_changelogs</span><span class=p>,</span> <span class=n>start_tag</span><span class=p>,</span> <span class=n>stop_tag</span><span class=p>):</span>
    <span class=n>template</span> <span class=o>=</span> <span class=s2>"## </span><span class=si>{category}</span><span class=s2>"</span>

    <span class=n>item_template</span> <span class=o>=</span> <span class=s2>"* </span><span class=si>{scope}</span><span class=s2>: </span><span class=si>{title}</span><span class=s2> [</span><span class=si>{commit}</span><span class=s2>](https://github.com/qutang/arus/commit/</span><span class=si>{commit}</span><span class=s2>)"</span>
    <span class=n>item_template2</span> <span class=o>=</span> <span class=s2>"* </span><span class=si>{title}</span><span class=s2> [</span><span class=si>{commit}</span><span class=s2>](https://github.com/qutang/arus/commit/</span><span class=si>{commit}</span><span class=s2>)"</span>

    <span class=n>category_order</span> <span class=o>=</span> <span class=p>[</span><span class=s1>'API changes'</span><span class=p>,</span>
                      <span class=s1>'Features'</span><span class=p>,</span>
                      <span class=s1>'Bug fixes'</span><span class=p>,</span>
                      <span class=s1>'Refactors'</span><span class=p>,</span>
                      <span class=s1>'Test cases'</span><span class=p>]</span>

    <span class=k>if</span> <span class=n>stop_tag</span> <span class=o>==</span> <span class=s1>'HEAD'</span><span class=p>:</span>
        <span class=n>stop_tag</span> <span class=o>=</span> <span class=s1>'dev'</span>

    <span class=n>os</span><span class=o>.</span><span class=n>makedirs</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=s1>'.'</span><span class=p>,</span> <span class=s1>'docs'</span><span class=p>,</span> <span class=s1>'changelogs'</span><span class=p>),</span> <span class=n>exist_ok</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=s1>'.'</span><span class=p>,</span> <span class=s1>'docs'</span><span class=p>,</span> <span class=s1>'changelogs'</span><span class=p>,</span> <span class=sa>f</span><span class=s1>'</span><span class=si>{</span><span class=n>stop_tag</span><span class=si>}</span><span class=s1>.md'</span><span class=p>),</span> <span class=s1>'w'</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=s1>'utf-8'</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
        <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=sa>f</span><span class=s1>'# </span><span class=si>{</span><span class=n>stop_tag</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span><span class=si>}</span><span class=se>\n</span><span class=s1>'</span><span class=p>)</span>
        <span class=k>for</span> <span class=n>category</span> <span class=ow>in</span> <span class=n>category_order</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>category</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>parsed_changelogs</span><span class=p>:</span>
                <span class=k>continue</span>
            <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>template</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>category</span><span class=o>=</span><span class=n>category</span><span class=p>))</span>
            <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s1>'</span><span class=se>\n</span><span class=s1>'</span><span class=p>)</span>
            <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>parsed_changelogs</span><span class=p>[</span><span class=n>category</span><span class=p>]:</span>
                <span class=k>if</span> <span class=n>item</span><span class=p>[</span><span class=s1>'scope'</span><span class=p>]</span> <span class=o>==</span> <span class=s1>''</span><span class=p>:</span>
                    <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>item_template2</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                        <span class=n>title</span><span class=o>=</span><span class=n>item</span><span class=p>[</span><span class=s1>'title'</span><span class=p>],</span> <span class=n>commit</span><span class=o>=</span><span class=n>item</span><span class=p>[</span><span class=s1>'commit'</span><span class=p>]))</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>item_template</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
                        <span class=n>scope</span><span class=o>=</span><span class=n>item</span><span class=p>[</span><span class=s1>'scope'</span><span class=p>],</span> <span class=n>title</span><span class=o>=</span><span class=n>item</span><span class=p>[</span><span class=s1>'title'</span><span class=p>],</span> <span class=n>commit</span><span class=o>=</span><span class=n>item</span><span class=p>[</span><span class=s1>'commit'</span><span class=p>]))</span>
                <span class=n>f</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=s1>'</span><span class=se>\n</span><span class=s1>'</span><span class=p>)</span>
</code></pre> </div> </td> </tr> </table> </details> </div> </div> </div> </div> </div> <hr> <div class=md-source-date> <small> Last update: March 4, 2020 </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav aria-label=Footer class="md-footer-nav__inner md-grid"> <a class="md-footer-nav__link md-footer-nav__link--prev" href=../dataset/ rel=prev title=Dataset> <div class="md-footer-nav__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Dataset </div> </div> </a> <a class="md-footer-nav__link md-footer-nav__link--next" href=../moment/ rel=next title=Moment> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Moment </div> </div> <div class="md-footer-nav__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> 2020 © Qu Tang </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> <div class=md-footer-social> <a class=md-footer-social__link href=https://qutang.dev rel=noopener target=_blank title=qutang.dev> <svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M256 8C118.941 8 8 118.919 8 256c0 137.059 110.919 248 248 248 48.154 0 95.342-14.14 135.408-40.223 12.005-7.815 14.625-24.288 5.552-35.372l-10.177-12.433c-7.671-9.371-21.179-11.667-31.373-5.129C325.92 429.757 291.314 440 256 440c-101.458 0-184-82.542-184-184S154.542 72 256 72c100.139 0 184 57.619 184 160 0 38.786-21.093 79.742-58.17 83.693-17.349-.454-16.91-12.857-13.476-30.024l23.433-121.11C394.653 149.75 383.308 136 368.225 136h-44.981a13.518 13.518 0 00-13.432 11.993l-.01.092c-14.697-17.901-40.448-21.775-59.971-21.775-74.58 0-137.831 62.234-137.831 151.46 0 65.303 36.785 105.87 96 105.87 26.984 0 57.369-15.637 74.991-38.333 9.522 34.104 40.613 34.103 70.71 34.103C462.609 379.41 504 307.798 504 232 504 95.653 394.023 8 256 8zm-21.68 304.43c-22.249 0-36.07-15.623-36.07-40.771 0-44.993 30.779-72.729 58.63-72.729 22.292 0 35.601 15.241 35.601 40.77 0 45.061-33.875 72.73-58.161 72.73z"></path></svg> </a> <a class=md-footer-social__link href=https://github.com/qutang rel=noopener target=_blank title=github.com> <svg viewbox="0 0 480 512" xmlns=http://www.w3.org/2000/svg><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg> </a> <a class=md-footer-social__link href=https://www.linkedin.com/in/qutang rel=noopener target=_blank title=www.linkedin.com> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg> </a> </div> </div> </div> </footer> </div> <script src=../../assets/javascripts/vendor.d710d30a.min.js></script> <script src=../../assets/javascripts/bundle.a14cc5fd.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../..",
          features: ["tabs", "instant"],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.7a2ea5ba.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>